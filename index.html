<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>보석동굴 그림책 탐험대</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#E0F7F1] min-h-screen p-6 text-sm">
  <!-- 상단 제목 -->
  <div class="text-center mb-4">
    <h1 class="text-2xl font-bold text-[#007F6D] mb-2">&lt;보석동굴&gt; 그림책 탐험대</h1>
    <div id="bokMessage" class="mt-2 text-[#007F6D] font-semibold text-lg">
      안녕! 나는 복복이야 💎
    </div>
  </div>

  <!-- 메뉴 버튼 -->
  <div class="flex flex-wrap justify-center gap-2 mb-4">
    <button id="toggleMenu" class="bg-sky-900 text-white rounded px-4 py-2">메뉴 숨기기 📘</button>
    <button data-page="1" class="menu-btn bg-sky-900 text-white rounded px-4 py-2">1. 어떤 보석들이 있을까요?</button>
    <button data-page="2" class="menu-btn bg-white border px-4 py-2 rounded">2. 나의 강점 보석</button>
    <button data-page="3" class="menu-btn bg-white border px-4 py-2 rounded">3. 나의 필요 보석</button>
    <button data-page="4" class="menu-btn bg-white border px-4 py-2 rounded">4. 활동 다짐</button>
  </div>

  <!-- 컨텐츠 -->
  <div id="content" class="max-w-4xl mx-auto">
    <div id="gem-meaning" class="text-center text-sm bg-white rounded shadow-md p-4 mb-6 hidden"></div>
    <div id="gem-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 text-center mb-6"></div>
    <div id="extra-content" class="mb-6"></div>
  </div>

  <script>
  window.addEventListener("DOMContentLoaded", () => {
    let selectedPage = 1;
    let clickedGems = {1:[],2:[],3:[],4:[]};

    const gems = [
      ["감사","배려","유연성","창의성"],
      ["결의","봉사","이상품기","책임감"],
      ["겸손","사랑","이해","청결"],
      ["관용","사려","인내","초연"],
      ["근면","상냥함","인정","충직"],
      ["기뻐함","소신","자율","친절"],
      ["기지","신뢰","절도","탁월함"],
      ["끈기","신용","정돈","평온함"],
      ["너그러움","열정","정의로움","한결같음"],
      ["도움","예의","정직","헌신"],
      ["명예","용기","존중","협동"],
      ["목적의식","용서","중용","화합"],
      ["믿음직함","우의","진실함","확신"]
    ];
    const ALL = [].concat(...gems);

    const meanings = {
      감사:"고마운 마음", 배려:"다른 사람을 먼저 생각", 유연성:"상황에 따라 잘 바꾸는 힘", 창의성:"새로운 생각을 떠올림",
      결의:"마음을 단단히 먹는 다짐", 봉사:"다른 사람을 돕는 행동", 이상품기:"좋은 생각을 떠올리는 힘", 책임감:"맡은 일을 끝까지 함",
      겸손:"잘해도 자랑하지 않음", 사랑:"마음을 다해 아끼고 좋아함", 이해:"다른 사람 기분을 알아줌", 청결:"깨끗하게 하는 습관",
      관용:"다른 사람 잘못을 넓게 봐줌", 사려:"깊이 생각하고 행동함", 인내:"힘들어도 참는 힘", 초연:"마음이 흔들리지 않고 편안함",
      근면:"부지런히 일함", 상냥함:"부드럽고 친절함", 인정:"다른 사람을 좋게 생각", 충직:"믿음을 지키고 성실함",
      기뻐함:"즐겁고 행복한 마음", 소신:"내 생각을 믿고 지킴", 자율:"스스로 하는 힘", 친절:"다정하게 잘 대해줌",
      기지:"재치 있게 해결함", 신뢰:"믿고 의지하는 마음", 절도:"알맞게 조절함", 탁월함:"아주 잘하는 능력",
      끈기:"끝까지 포기하지 않음", 신용:"믿을 수 있는 태도", 정돈:"깔끔하게 정리함", 평온함:"마음이 조용하고 편안함",
      너그러움:"작은 잘못을 이해해줌", 열정:"무엇이든 힘차게 함", 정의로움:"옳고 바른 것을 지킴", 한결같음:"언제나 똑같이 성실함",
      도움:"필요한 사람을 거듬", 예의:"바르게 말하고 행동", 정직:"거짓말하지 않음", 헌신:"마음을 다해 도와줌",
      명예:"바르게 살아 얻는 좋은 이름", 용기:"무섭거나 어려워도 해봄", 존중:"다른 사람을 소중히 여김", 협동:"힘을 합쳐 같이 함",
      목적의식:"왜 하는지 뚜렷이 앎", 용서:"다른 사람 잘못을 풀어줌", 중용:"치우치지 않고 바르게 함", 화합:"서로 잘 어울려 지냄",
      믿음직함:"믿고 맡길 수 있음", 우의:"친구처럼 친밀함", 진실함:"거짓 없이 참됨", 확신:"자신 있게 믿음"
    };

    const msgs = ["빛나는 마음이 느껴져 🌟","좋은 선택이야 💎","복복이가 응원해 👏"];
    const say = t => document.getElementById("bokMessage").textContent = t;

    // 보석 출력
    function renderGems(){
      const list = document.getElementById("gem-list");
      const card = document.getElementById("gem-meaning");
      list.innerHTML = "";
      ALL.forEach(word => {
        const btn = document.createElement("div");
        btn.textContent = word;
        btn.className = "cursor-pointer py-2 rounded shadow hover:bg-blue-100 " +
          (clickedGems[selectedPage].includes(word) ? "bg-pink-300 text-white" : "bg-white");
        btn.onclick = () => {
          if(!clickedGems[selectedPage].includes(word)) clickedGems[selectedPage].push(word);

          // 1번은 위에 의미+메모창
          if(selectedPage === 1){
            card.innerHTML = `
              <div class='text-2xl mb-1'>💎</div>
              <div class='font-bold'>${word}</div>
              <div class='mb-2'>${meanings[word]}</div>
              <textarea id='note-${word}' class='w-full border rounded p-2 text-sm'
                placeholder='생각을 적어보세요 ✏️'>${localStorage.getItem("note_"+word)||""}</textarea>`;
            card.classList.remove("hidden");
          } else {
            card.classList.add("hidden");
          }

          say(msgs[Math.floor(Math.random()*msgs.length)]);
          renderGems();
        };
        list.appendChild(btn);
      });
    }

    // 페이지별 하단 메모영역
    function renderExtra(){
      const ex = document.getElementById("extra-content"); 
      ex.innerHTML = "";

      if(selectedPage===2){
        ex.innerHTML = `
          <h2 class='text-lg font-semibold mb-2'>내가 잘하는 보석 2개를 골라 이유를 써보세요.</h2>
          <textarea class='w-full border rounded p-2 text-sm' placeholder='여기에 적어보세요 ✏️'></textarea>`;
      }
      if(selectedPage===3){
        ex.innerHTML = `
          <h2 class='text-lg font-semibold mb-2'>지금 나에게 필요한 보석 2개를 골라 이유를 써보세요.</h2>
          <textarea class='w-full border rounded p-2 text-sm' placeholder='여기에 적어보세요 ✏️'></textarea>`;
      }
      if(selectedPage===4){
        ex.innerHTML = `
          <h2 class='text-lg font-semibold mb-2'>오늘의 다짐을 써보세요.</h2>
          <textarea class='w-full border rounded p-2 text-sm' placeholder='오늘의 다짐을 적어보세요 ✏️'></textarea>`;
      }
    }

    // 메뉴 전환
    document.querySelectorAll(".menu-btn").forEach(btn=>{
      btn.onclick=()=>{
        selectedPage=parseInt(btn.dataset.page,10);

        // 버튼 스타일 (선택된 것만 파랑)
        document.querySelectorAll(".menu-btn").forEach(b=>{
          b.classList.remove("bg-sky-900","text-white","border");
          b.classList.add("bg-white","border");
        });
        btn.classList.remove("bg-white","border");
        btn.classList.add("bg-sky-900","text-white");

        renderGems(); renderExtra();
      };
    });

    // 메뉴 숨기기
    document.getElementById("toggleMenu").onclick=()=>{
      const bs=document.querySelectorAll(".menu-btn");
      const v=bs[0].style.display!=="none";
      bs.forEach(b=>b.style.display=v?"none":"inline-block");
      document.getElementById("toggleMenu").textContent=v?"메뉴 보이기 📘":"메뉴 숨기기 📘";
    };

    renderGems(); renderExtra();
  });
  </script>
</body>
</html>
